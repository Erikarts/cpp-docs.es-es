---
title: CMFCToolBarMenuButton (clase)
ms.date: 11/04/2016
f1_keywords:
- CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CompareWith
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CopyFrom
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreateFromMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreateMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreatePopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::EnableQuickCustomize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetCommands
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetImageRect
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetPaletteRows
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetPopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::HasButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::HaveHotBorder
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsBorder
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsClickedOnMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsDroppedDown
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsEmptyMenuAllowed
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsExclusive
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsMenuPaletteMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsQuickMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsTearOffMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnAfterCreatePopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnBeforeDrag
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnCalculateSize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnCancelMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnChangeParentWnd
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnClick
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnClickMenuItem
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnContextHelp
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnDraw
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnDrawOnCustomizeList
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OpenPopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::ResetImageToDefault
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SaveBarState
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::Serialize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetACCData
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMenuOnly
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMenuPaletteMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMessageWnd
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetRadio
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetTearOff
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::DrawDocumentIcon
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw
helpviewer_keywords:
- CMFCToolBarMenuButton [MFC], CMFCToolBarMenuButton
- CMFCToolBarMenuButton [MFC], CompareWith
- CMFCToolBarMenuButton [MFC], CopyFrom
- CMFCToolBarMenuButton [MFC], CreateFromMenu
- CMFCToolBarMenuButton [MFC], CreateMenu
- CMFCToolBarMenuButton [MFC], CreatePopupMenu
- CMFCToolBarMenuButton [MFC], EnableQuickCustomize
- CMFCToolBarMenuButton [MFC], GetCommands
- CMFCToolBarMenuButton [MFC], GetImageRect
- CMFCToolBarMenuButton [MFC], GetPaletteRows
- CMFCToolBarMenuButton [MFC], GetPopupMenu
- CMFCToolBarMenuButton [MFC], HasButton
- CMFCToolBarMenuButton [MFC], HaveHotBorder
- CMFCToolBarMenuButton [MFC], IsBorder
- CMFCToolBarMenuButton [MFC], IsClickedOnMenu
- CMFCToolBarMenuButton [MFC], IsDroppedDown
- CMFCToolBarMenuButton [MFC], IsEmptyMenuAllowed
- CMFCToolBarMenuButton [MFC], IsExclusive
- CMFCToolBarMenuButton [MFC], IsMenuPaletteMode
- CMFCToolBarMenuButton [MFC], IsQuickMode
- CMFCToolBarMenuButton [MFC], IsTearOffMenu
- CMFCToolBarMenuButton [MFC], OnAfterCreatePopupMenu
- CMFCToolBarMenuButton [MFC], OnBeforeDrag
- CMFCToolBarMenuButton [MFC], OnCalculateSize
- CMFCToolBarMenuButton [MFC], OnCancelMode
- CMFCToolBarMenuButton [MFC], OnChangeParentWnd
- CMFCToolBarMenuButton [MFC], OnClick
- CMFCToolBarMenuButton [MFC], OnClickMenuItem
- CMFCToolBarMenuButton [MFC], OnContextHelp
- CMFCToolBarMenuButton [MFC], OnDraw
- CMFCToolBarMenuButton [MFC], OnDrawOnCustomizeList
- CMFCToolBarMenuButton [MFC], OpenPopupMenu
- CMFCToolBarMenuButton [MFC], ResetImageToDefault
- CMFCToolBarMenuButton [MFC], SaveBarState
- CMFCToolBarMenuButton [MFC], Serialize
- CMFCToolBarMenuButton [MFC], SetACCData
- CMFCToolBarMenuButton [MFC], SetMenuOnly
- CMFCToolBarMenuButton [MFC], SetMenuPaletteMode
- CMFCToolBarMenuButton [MFC], SetMessageWnd
- CMFCToolBarMenuButton [MFC], SetRadio
- CMFCToolBarMenuButton [MFC], SetTearOff
- CMFCToolBarMenuButton [MFC], DrawDocumentIcon
- CMFCToolBarMenuButton [MFC], m_bAlwaysCallOwnerDraw
ms.assetid: cfa50176-7e4b-4527-9904-86a1b48fc1bc
ms.openlocfilehash: 418ef29657271010c3a12f0f15a12f45e5351aac
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/14/2020
ms.locfileid: "81376172"
---
# <a name="cmfctoolbarmenubutton-class"></a>CMFCToolBarMenuButton (clase)

Un botón de la barra de herramientas que contiene un menú emergente.
Para obtener más información, vea el código fuente ubicado en la carpeta **VC\\atlmfc\\src\\mfc** de la instalación de Visual Studio.

## <a name="syntax"></a>Sintaxis

```
class CMFCToolBarMenuButton : public CMFCToolBarButton
```

## <a name="members"></a>Miembros

### <a name="public-constructors"></a>Constructores públicos

|Nombre|Descripción|
|----------|-----------------|
|[CMFCToolBarMenuButton::CMFCToolBarMenuButton](#cmfctoolbarmenubutton)|Construye un objeto `CMFCToolBarMenuButton`.|

### <a name="public-methods"></a>Métodos públicos

|Nombre|Descripción|
|----------|-----------------|
|[CMFCToolBarMenuButton::CompareWith](#comparewith)|Compara esta instancia con `CMFCToolBarButton` el objeto proporcionado. (Reemplaza [CMFCToolBarButton::CompareWith](../../mfc/reference/cmfctoolbarbutton-class.md#comparewith).)|
|[CMFCToolBarMenuButton::CopyFrom](#copyfrom)|Copia las propiedades de otro botón de la barra de herramientas en el botón actual. (Reemplaza [CMFCToolBarButton::CopyFrom](../../mfc/reference/cmfctoolbarbutton-class.md#copyfrom).)|
|[CMFCToolBarMenuButton::CreateFromMenu](#createfrommenu)|Inicializa el menú de la barra de herramientas desde un identificador de menú de Windows.|
|[CMFCToolBarMenuButton::CreateMenu](#createmenu)|Crea un menú de Windows que consta de los comandos del menú de la barra de herramientas. Devuelve un identificador al menú de Windows.|
|[CMFCToolBarMenuButton::CreatePopupMenu](#createpopupmenu)|Crea un objeto de menú emergente ( [CMFCPopupMenu Class](../../mfc/reference/cmfcpopupmenu-class.md)) para mostrar el menú de la barra de herramientas.|
|[CMFCToolBarMenuButton::EnableQuickCustomize](#enablequickcustomize)||
|[CMFCToolBarMenuButton::GetCommands](#getcommands)|Proporciona acceso de solo lectura a la lista de comandos del menú de la barra de herramientas.|
|[CMFCToolBarMenuButton::GetImageRect](#getimagerect)|Recupera el rectángulo delimitador de la imagen del botón.|
|[CMFCToolBarMenuButton::GetPaletteRows](#getpaletterows)|Devuelve el número de filas en el menú emergente cuando el menú está en modo de paleta.|
|[CMFCToolBarMenuButton::GetPopupMenu](#getpopupmenu)|Devuelve un puntero al objeto de menú emergente asociado al botón.|
|[CMFCToolBarMenuButton::HasButton](#hasbutton)||
|[CMFCToolBarMenuButton::HaveHotBorder](#havehotborder)|Determina si se muestra un borde del botón cuando un usuario selecciona el botón. (Reemplaza [CMFCToolBarButton::HaveHotBorder](../../mfc/reference/cmfctoolbarbutton-class.md#havehotborder).)|
|[CMFCToolBarMenuButton::IsBorder](#isborder)||
|[CMFCToolBarMenuButton::IsClickedOnMenu](#isclickedonmenu)||
|[CMFCToolBarMenuButton::IsDroppedDown](#isdroppeddown)|Determina si se muestra el menú emergente.|
|[CMFCToolBarMenuButton::IsEmptyMenuAllowed](#isemptymenuallowed)|Llamado por el marco de trabajo para determinar si un usuario puede abrir un submenú desde el elemento de menú seleccionado.|
|[CMFCToolBarMenuButton::IsExclusive](#isexclusive)|Determina si el botón está en modo exclusivo, es decir, si el menú emergente permanece abierto incluso cuando el usuario mueve el puntero sobre otra barra de herramientas o botón.|
|[CMFCToolBarMenuButton::IsMenuPaletteMode](#ismenupalettemode)|Determina si el menú emergente está en modo de paleta.|
|[CMFCToolBarMenuButton::IsQuickMode](#isquickmode)||
|[CMFCToolBarMenuButton::IsTearOffMenu](#istearoffmenu)|Determina si el menú emergente tiene una barra de desmontaje.|
|[CMFCToolBarMenuButton::OnAfterCreatePopupMenu](#onaftercreatepopupmenu)||
|[CMFCToolBarMenuButton::OnBeforeDrag](#onbeforedrag)|Especifica si se puede arrastrar el botón. (Reemplaza [CMFCToolBarButton::OnBeforeDrag](../../mfc/reference/cmfctoolbarbutton-class.md#onbeforedrag).)|
|[CMFCToolBarMenuButton::OnCalculateSize](#oncalculatesize)|Llamado por el marco de trabajo para calcular el tamaño del botón para el contexto de dispositivo especificado y el estado de acoplamiento. (Reemplaza [CMFCToolBarButton::OnCalculateSize](../../mfc/reference/cmfctoolbarbutton-class.md#oncalculatesize).)|
|[CMFCToolBarMenuButton::OnCancelMode](#oncancelmode)|Llamado por el marco de trabajo para controlar el [mensaje de WM_CANCELMODE.](/windows/win32/winmsg/wm-cancelmode) (Reemplaza [CMFCToolBarButton::OnCancelMode](../../mfc/reference/cmfctoolbarbutton-class.md#oncancelmode).)|
|[CMFCToolBarMenuButton::OnChangeParentWnd](#onchangeparentwnd)|Llamado por el marco de trabajo cuando el botón se inserta en una nueva barra de herramientas. (Reemplaza [CMFCToolBarButton::OnChangeParentWnd](cmfctoolbarbutton-class.md#onchangeparentwnd).)|
|[CMFCToolBarMenuButton::OnClick](#onclick)|Llamado por el marco de trabajo cuando el usuario hace clic en el botón del mouse. (Reemplaza [CMFCToolBarButton::OnClick](../../mfc/reference/cmfctoolbarbutton-class.md#onclick).)|
|[CMFCToolBarMenuButton::OnClickMenuItem](#onclickmenuitem)|Llamado por el marco de trabajo cuando el usuario selecciona un elemento en el menú emergente.|
|[CMFCToolBarMenuButton::OnContextHelp](#oncontexthelp)|Llamado por el marco de trabajo cuando la barra de herramientas primaria controla un mensaje de WM_HELPHITTEST. (Reemplaza [CMFCToolBarButton::OnContextHelp](../../mfc/reference/cmfctoolbarbutton-class.md#oncontexthelp).)|
|[CMFCToolBarMenuButton::OnDraw](#ondraw)|Llamado por el marco de trabajo para dibujar el botón mediante el uso de los estilos y opciones especificados. (Reemplaza [CMFCToolBarButton::OnDraw](../../mfc/reference/cmfctoolbarbutton-class.md#ondraw).)|
|[CMFCToolBarMenuButton::OnDrawOnCustomizeList](#ondrawoncustomizelist)|Llamado por el marco de trabajo para dibujar el botón en el **comandos** panel de la **personalizar** cuadro de diálogo. (Reemplaza [CMFCToolBarButton::OnDrawOnCustomizeList](../../mfc/reference/cmfctoolbarbutton-class.md#ondrawoncustomizelist).)|
|[CMFCToolBarMenuButton::OpenPopupMenu](#openpopupmenu)|Llamado por el marco de trabajo cuando el usuario abre el menú emergente.|
|[CMFCToolBarMenuButton::ResetImageToDefault](#resetimagetodefault)|Establece en el valor predeterminado la imagen asociada al botón. (Reemplaza [CMFCToolBarButton::ResetImageToDefault](../../mfc/reference/cmfctoolbarbutton-class.md#resetimagetodefault).)|
|[CMFCToolBarMenuButton::SaveBarState](#savebarstate)|Guarda el estado del botón de la barra de herramientas. (Reemplaza [CMFCToolBarButton::SaveBarState](../../mfc/reference/cmfctoolbarbutton-class.md#savebarstate).)|
|[CMFCToolBarMenuButton::Serialize](#serialize)|Lee este objeto de un archivo o lo escribe en un archivo. (Reemplaza [CMFCToolBarButton::Serialize](../../mfc/reference/cmfctoolbarbutton-class.md#serialize).)|
|[CMFCToolBarMenuButton::SetACCData](#setaccdata)|Rellena el `CAccessibilityData` objeto proporcionado con datos de accesibilidad desde el botón de la barra de herramientas. (Reemplaza [CMFCToolBarButton::SetACCData](../../mfc/reference/cmfctoolbarbutton-class.md#setaccdata).)|
|[CMFCToolBarMenuButton::SetMenuOnly](#setmenuonly)|Especifica si el botón se puede agregar a una barra de herramientas.|
|[CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode)|Especifica si el menú emergente está en modo de paleta.|
|[CMFCToolBarMenuButton::SetMessageWnd](#setmessagewnd)||
|[CMFCToolBarMenuButton::SetRadio](#setradio)|Fuerza el botón de menú de la barra de herramientas para mostrar un icono que indica que está seleccionado.|
|[CMFCToolBarMenuButton::SetTearOff](#settearoff)|Especifica un identificador de barra de desmontaje para el menú emergente.|

### <a name="protected-methods"></a>Métodos protegidos

|Nombre|Descripción|
|----------|-----------------|
|[CMFCToolBarMenuButton::DrawDocumentIcon](#drawdocumenticon)|Dibuja un icono en el botón de menú.|

### <a name="data-members"></a>Miembros de datos

|Nombre|Descripción|
|----------|-----------------|
|[CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw](#m_balwayscallownerdraw)|Si TRUE, el marco de trabajo siempre llama [a CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) cuando se dibuja un botón.|

## <a name="remarks"></a>Observaciones

A `CMFCToolBarMenuButton` puede aparecer como un menú, un elemento de menú que tiene un submenú, un botón que ejecuta un comando o muestra un menú, o un botón que muestra solo un menú. Para determinar el comportamiento y la apariencia del botón de menú, especifique parámetros como la imagen, `CMFCToolbarMenuButton::CMFCToolbarMenuButton`el texto, el identificador de menú y el identificador de comando asociado al botón del constructor.

Una clase personalizada derivada `CMFCToolbarMenuButton` de la clase debe usar la [macro DECLARE_SERIAL.](run-time-object-model-services.md#declare_serial) La macro [DECLARE_DYNCREATE](run-time-object-model-services.md#declare_dyncreate) genera un error cuando se cierra la aplicación.

## <a name="example"></a>Ejemplo

En el ejemplo siguiente se `CMFCToolBarMenuButton` muestra cómo configurar un objeto. El código ilustra cómo especificar que el menú desplegable está en modo de paleta y especificar el identificador de la barra de desmontaje que se crea cuando el usuario arrastra el botón de menú fuera de una barra de menús. Este fragmento de código forma parte del [ejemplo de WordPad](../../overview/visual-cpp-samples.md).

[!code-cpp[NVC_MFC_WordPad#10](../../mfc/reference/codesnippet/cpp/cmfctoolbarmenubutton-class_1.cpp)]

## <a name="inheritance-hierarchy"></a>Jerarquía de herencia

[CObject](cobject-class.md)

[CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)

[CMFCToolBarMenuButton](../../mfc/reference/cmfctoolbarmenubutton-class.md)

## <a name="requirements"></a>Requisitos

**Encabezado:** afxtoolbarmenubutton.h

## <a name="cmfctoolbarmenubuttoncmfctoolbarmenubutton"></a><a name="cmfctoolbarmenubutton"></a>CMFCToolBarMenuButton::CMFCToolBarMenuButton

Construye un objeto `CMFCToolBarMenuButton`.

```
CMFCToolBarMenuButton();
CMFCToolBarMenuButton(const CMFCToolBarMenuButton& src);

CMFCToolBarMenuButton(
    UINT uiID,
    HMENU hMenu,
    int iImage,
    LPCTSTR lpszText=NULL,
    BOOL bUserButton=FALSE);
```

### <a name="parameters"></a>Parámetros

*src*<br/>
[en] Objeto `CMFCToolBarMenuButton` existente que se va `CMFCToolBarMenuButton` a copiar en este objeto.

*uiID*<br/>
[en] El identificador del comando que se ejecutará cuando un usuario hace clic en el botón; (UINT)-1 para un botón de menú que no ejecuta directamente un comando.

*hMenú*<br/>
[en] Un identificador de un menú; o NULL si el botón no tiene un menú.

*iImage*<br/>
[en] Indice de la imagen para el botón; o -1 si este botón no tiene un icono o utiliza el icono para el comando especificado por *uiID*. El índice es el `CMFCToolBarImages` mismo para cada objeto de la aplicación.

*lpszText*<br/>
[en] El texto del botón de menú de la barra de herramientas.

*bUserButton*<br/>
[en] TRUESi el botón muestra una imagen definida por el usuario; FALSE si el botón muestra una imagen predefinida asociada al comando especificado por *uiID*.

### <a name="remarks"></a>Observaciones

Si *uiID* es un identificador de comando válido, el botón realiza ese comando cuando el usuario hace clic en él. Si *hMenu* es un identificador de menú válido, el botón proporciona un menú desplegable cuando aparece en una barra de herramientas o un submenú cuando aparece en un menú. Si *uiID* y *hMenu* son válidos, el botón es un botón dividido con una parte que realizará el comando cuando el usuario haga clic en él y una parte con una flecha hacia abajo que aparecerá un menú desplegable cuando el usuario haga clic en él. Sin embargo, si *hMenu* es válido, un usuario no podrá hacer clic en el botón para realizar un comando cuando el botón se inserta en un menú.

### <a name="example"></a>Ejemplo

En el ejemplo siguiente se muestra `CMFCToolBarMenuButton` cómo construir un objeto de la clase. Este fragmento de código forma parte del [ejemplo de WordPad](../../overview/visual-cpp-samples.md).

[!code-cpp[NVC_MFC_WordPad#9](../../mfc/reference/codesnippet/cpp/cmfctoolbarmenubutton-class_2.cpp)]

## <a name="cmfctoolbarmenubuttoncomparewith"></a><a name="comparewith"></a>CMFCToolBarMenuButton::CompareWith

```
virtual BOOL CompareWith(const CMFCToolBarButton& other) const;
```

### <a name="parameters"></a>Parámetros

[en] *otros*<br/>

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttoncopyfrom"></a><a name="copyfrom"></a>CMFCToolBarMenuButton::CopyFrom

```
virtual void CopyFrom(const CMFCToolBarButton& src);
```

### <a name="parameters"></a>Parámetros

[en] *src*<br/>

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttoncreatefrommenu"></a><a name="createfrommenu"></a>CMFCToolBarMenuButton::CreateFromMenu

Inicializa el menú de la barra de herramientas desde un identificador de menú de Windows.

```
virtual void CreateFromMenu(HMENU hMenu);
```

### <a name="parameters"></a>Parámetros

*hMenú*<br/>
[en] Un identificador de un menú.

### <a name="remarks"></a>Observaciones

Un botón de menú de la barra de herramientas puede mostrar un submenú desplegable.

El marco de trabajo llama a este método para inicializar los comandos en el submenú desde un menú.

## <a name="cmfctoolbarmenubuttoncreatemenu"></a><a name="createmenu"></a>CMFCToolBarMenuButton::CreateMenu

Crea un menú que consta de los comandos del menú de la barra de herramientas. Devuelve un identificador al menú.

```
virtual HMENU CreateMenu() const;
```

### <a name="return-value"></a>Valor devuelto

Un identificador del menú si se realiza correctamente. NULL si la lista de comandos asociados con el botón de menú de la barra de herramientas está vacía.

### <a name="remarks"></a>Observaciones

Puede invalidar este método en una clase derivada para personalizar la forma en que se genera el menú.

## <a name="cmfctoolbarmenubuttoncreatepopupmenu"></a><a name="createpopupmenu"></a>CMFCToolBarMenuButton::CreatePopupMenu

Crea `CMFCPopupMenu` un objeto para mostrar el menú de la barra de herramientas.

```
virtual CMFCPopupMenu* CreatePopupMenu();
```

### <a name="return-value"></a>Valor devuelto

Puntero a `CMFCPopupMenu` un objeto que muestra el menú desplegable asociado con el botón de menú de la barra de herramientas.

### <a name="remarks"></a>Observaciones

El marco de trabajo llama a este método para preparar la visualización del menú desplegable asociado con el botón.

La implementación predeterminada solo construye `CMFCPopupMenu` y devuelve un nuevo objeto. Invalide este método si desea utilizar un tipo derivado de [CMFCPopupMenu (clase)](cmfcpopupmenu-class.md) o realizar una inicialización adicional.

## <a name="cmfctoolbarmenubuttondrawdocumenticon"></a><a name="drawdocumenticon"></a>CMFCToolBarMenuButton::DrawDocumentIcon

Dibuja un icono de documento en el botón de menú.

```
void DrawDocumentIcon(
    CDC* pDC,
    const CRect& rectImage,
    HICON hIcon);
```

### <a name="parameters"></a>Parámetros

*pDC*<br/>
[en] Un puntero al contexto del dispositivo.

*rectImage*<br/>
[en] Coordenadas del rectángulo delimitador de la imagen.

*hIcon*<br/>
[en] Un identificador del icono.

### <a name="remarks"></a>Observaciones

Este método toma un icono de documento y lo dibuja en el botón de menú, centrado en el área especificada por *rectImage*.

## <a name="cmfctoolbarmenubuttonenablequickcustomize"></a><a name="enablequickcustomize"></a>CMFCToolBarMenuButton::EnableQuickCustomize

```
void EnableQuickCustomize();
```

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttonhasbutton"></a><a name="hasbutton"></a>CMFCToolBarMenuButton::HasButton

```
virtual BOOL HasButton() const;
```

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttonhavehotborder"></a><a name="havehotborder"></a>CMFCToolBarMenuButton::HaveHotBorder

```
virtual BOOL HaveHotBorder() const;
```

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttonisborder"></a><a name="isborder"></a>CMFCToolBarMenuButton::IsBorder

```
virtual BOOL IsBorder() const;
```

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttonisclickedonmenu"></a><a name="isclickedonmenu"></a>CMFCToolBarMenuButton::IsClickedOnMenu

```
BOOL IsClickedOnMenu() const;
```

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttonisquickmode"></a><a name="isquickmode"></a>CMFCToolBarMenuButton::IsQuickMode

```
BOOL IsQuickMode();
```

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttongetcommands"></a><a name="getcommands"></a>CMFCToolBarMenuButton::GetCommands

Proporciona acceso de solo lectura a la lista de comandos del menú de la barra de herramientas.

```
const CObList& GetCommands() const;
```

### <a name="return-value"></a>Valor devuelto

Una referencia const a un [CObList clase](../../mfc/reference/coblist-class.md) objeto, que contiene una colección de [CMFCToolBarButton clase](../../mfc/reference/cmfctoolbarbutton-class.md) objetos.

### <a name="remarks"></a>Observaciones

Un botón de menú de la barra de herramientas puede mostrar un submenú. Puede proporcionar la lista de comandos en el submenú en el constructor o en [CMFCToolBarMenuButton::CreateFromMenu](#createfrommenu) como un identificador de un menú (HMENU). El menú se convierte en una lista de objetos que se derivan `CObList` de [CMFCToolBarButton (clase)](../../mfc/reference/cmfctoolbarbutton-class.md) y se almacenan en el objeto interno. Puede tener acceso a esta lista mediante una llamada a este método.

## <a name="cmfctoolbarmenubuttongetimagerect"></a><a name="getimagerect"></a>CMFCToolBarMenuButton::GetImageRect

Recupera el rectángulo delimitador de la imagen del botón.

```
void GetImageRect(CRect& rectImage);
```

### <a name="parameters"></a>Parámetros

*rectImage*<br/>
[fuera] Una referencia `CRect` a un objeto que recibe las coordenadas del rectángulo delimitador de la imagen.

## <a name="cmfctoolbarmenubuttongetpaletterows"></a><a name="getpaletterows"></a>CMFCToolBarMenuButton::GetPaletteRows

Devuelve el número de filas en el menú desplegable cuando el menú está en modo de paleta.

```
int GetPaletteRows() const;
```

### <a name="return-value"></a>Valor devuelto

El número de filas de la paleta.

### <a name="remarks"></a>Observaciones

Cuando el botón de menú se establece en modo de paleta, los elementos de menú aparecerán en varias columnas con solo un número limitado de filas. Llame a este método para obtener el número de filas. Puede habilitar o deshabilitar el modo de paleta y especificar el número de filas mediante [CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode).

## <a name="cmfctoolbarmenubuttongetpopupmenu"></a><a name="getpopupmenu"></a>CMFCToolBarMenuButton::GetPopupMenu

Devuelve un puntero a la [CMFCPopupMenu clase](../../mfc/reference/cmfcpopupmenu-class.md) objeto que representa el menú desplegable del botón.

```
CMFCPopupMenu* GetPopupMenu() const;
```

### <a name="return-value"></a>Valor devuelto

Un puntero a un [CMFCPopupMenu clase](../../mfc/reference/cmfcpopupmenu-class.md) objeto que se creó cuando el marco de trabajo dibujó el submenú del botón de menú de la barra de herramientas; NULL si no se muestra ningún submenú.

### <a name="remarks"></a>Observaciones

Cuando un botón de menú de la barra de herramientas muestra un menú desplegable, el botón crea un [CMFCPopupMenu clase](../../mfc/reference/cmfcpopupmenu-class.md) objeto para representar el menú. Llame a este método para `CMFCPopupMenu` obtener un puntero al objeto. No debe almacenar el puntero devuelto, porque es temporal y deja de ser válido cuando el usuario cierra el menú desplegable.

## <a name="cmfctoolbarmenubuttonisdroppeddown"></a><a name="isdroppeddown"></a>CMFCToolBarMenuButton::IsDroppedDown

Indica si el menú emergente se muestra actualmente.

```
virtual BOOL IsDroppedDown() const;
```

### <a name="return-value"></a>Valor devuelto

TRUESi el botón de menú de la barra de herramientas muestra su submenú; de lo contrario FALSO.

## <a name="cmfctoolbarmenubuttonisemptymenuallowed"></a><a name="isemptymenuallowed"></a>CMFCToolBarMenuButton::IsEmptyMenuAllowed

Especifica si los elementos de menú muestran submenús vacíos.

```
virtual BOOL IsEmptyMenuAllowed() const;
```

### <a name="return-value"></a>Valor devuelto

TRUESi el marco de trabajo abre un submenú desde el elemento de menú seleccionado actualmente incluso cuando el submenú está vacío; de lo contrario FALSO.

### <a name="remarks"></a>Observaciones

El marco de trabajo llama a este método cuando un usuario intenta abrir el submenú desde el elemento de menú seleccionado actualmente. Si el submenú `IsEmptyMenuAllowed` está vacío y devuelve FALSE, el submenú no se abrirá.

La implementación predeterminada devuelve FALSE. Invalide este método para personalizar este comportamiento.

## <a name="cmfctoolbarmenubuttonisexclusive"></a><a name="isexclusive"></a>CMFCToolBarMenuButton::IsExclusive

Indica si el botón está en modo exclusivo.

```
virtual BOOL IsExclusive() const;
```

### <a name="return-value"></a>Valor devuelto

TRUESi el botón funciona en modo exclusivo; de lo contrario FALSO.

### <a name="remarks"></a>Observaciones

Cuando un usuario abre un menú emergente para un botón y, a continuación, mueve el puntero del mouse sobre otra barra de herramientas o botón de menú, el menú emergente se cierra a menos que el botón esté en modo exclusivo.

La implementación predeterminada siempre devuelve FALSE. Invalide este método en una clase derivada si desea activar el modo exclusivo.

## <a name="cmfctoolbarmenubuttonismenupalettemode"></a><a name="ismenupalettemode"></a>CMFCToolBarMenuButton::IsMenuPaletteMode

Determina si el menú desplegable está en modo de paleta.

```
BOOL IsMenuPaletteMode() const;
```

### <a name="return-value"></a>Valor devuelto

TRUESi el modo de paleta está habilitado, de lo contrario FALSE.

### <a name="remarks"></a>Observaciones

Cuando el botón de menú se establece en modo de paleta, los elementos de menú aparecen en varias columnas con un número limitado de filas. Llame a este método para obtener el número de filas. Puede habilitar o deshabilitar el modo de paleta llamando a [CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode).

## <a name="cmfctoolbarmenubuttonistearoffmenu"></a><a name="istearoffmenu"></a>CMFCToolBarMenuButton::IsTearOffMenu

Indica si el menú desplegable tiene una barra de desmontaje.

```
virtual BOOL IsTearOffMenu() const;
```

### <a name="return-value"></a>Valor devuelto

TRUESi el botón de menú de la barra de herramientas tiene una barra de desmontaje; de lo contrario FALSO.

### <a name="remarks"></a>Observaciones

Para habilitar la característica de desmontaje y establecer el identificador de barra de desmontaje, llame a [CMFCToolBarMenuButton::SetTearOff](#settearoff).

## <a name="cmfctoolbarmenubuttonm_balwayscallownerdraw"></a><a name="m_balwayscallownerdraw"></a>CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw

Especifica si el marco de trabajo siempre llama [a CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) cuando se dibuja un botón.

```
static BOOL m_bAlwaysCallOwnerDraw;
```

### <a name="remarks"></a>Observaciones

Cuando esta variable miembro se establece en TRUE, el botón siempre llama [a CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) método para mostrar la imagen en el botón. Cuando `m_bAlwaysCallOwnerDraw` es FALSE, el propio botón dibuja la imagen si la imagen está predefinida. De lo `OnDrawMenuImage`contrario, llama a .

## <a name="cmfctoolbarmenubuttononaftercreatepopupmenu"></a><a name="onaftercreatepopupmenu"></a>CMFCToolBarMenuButton::OnAfterCreatePopupMenu

```
virtual void OnAfterCreatePopupMenu();
```

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttononbeforedrag"></a><a name="onbeforedrag"></a>CMFCToolBarMenuButton::OnBeforeDrag

```
virtual BOOL OnBeforeDrag() const;
```

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttononcalculatesize"></a><a name="oncalculatesize"></a>CMFCToolBarMenuButton::OnCalculateSize

```
virtual SIZE OnCalculateSize(
    CDC* pDC,
    const CSize& sizeDefault,
    BOOL bHorz);
```

### <a name="parameters"></a>Parámetros

[en] *pDC*<br/>
[en] *sizeDefault*<br/>
[en] *bHorz*<br/>

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttononcancelmode"></a><a name="oncancelmode"></a>CMFCToolBarMenuButton::OnCancelMode

```
virtual void OnCancelMode();
```

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttononchangeparentwnd"></a><a name="onchangeparentwnd"></a>CMFCToolBarMenuButton::OnChangeParentWnd

```
virtual void OnChangeParentWnd(CWnd* pWndParent);
```

### <a name="parameters"></a>Parámetros

[en] *pWndParent*<br/>

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttononclick"></a><a name="onclick"></a>CMFCToolBarMenuButton::OnClick

```
virtual BOOL OnClick(
    CWnd* pWnd,
    BOOL bDelay = TRUE);
```

### <a name="parameters"></a>Parámetros

[en] *pWnd*<br/>
[en] *bDelay*<br/>

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttononclickmenuitem"></a><a name="onclickmenuitem"></a>CMFCToolBarMenuButton::OnClickMenuItem

Llamado por el marco de trabajo cuando el usuario selecciona un elemento en el menú desplegable.

```
virtual BOOL OnClickMenuItem();
```

### <a name="return-value"></a>Valor devuelto

FALSE si el marco de trabajo debe continuar el procesamiento de elementos de menú predeterminado; de lo contrario VERDADERO. La implementación predeterminada siempre devuelve FALSE.

### <a name="remarks"></a>Observaciones

Cuando el usuario hace clic en un elemento de menú, el marco de trabajo ejecuta un comando que está asociado a ese elemento.

Para personalizar el procesamiento `OnClickMenuItem` de elementos de `CMFCToolBarMenuButton` menú, invalide en una clase derivada de la clase. También debe reemplazar [CFrameWndEx::OnShowPopupMenu](../../mfc/reference/cframewndex-class.md#onshowpopupmenu) y reemplazar los botones de menú que requieren un procesamiento especial con instancias de la clase derivada.

## <a name="cmfctoolbarmenubuttononcontexthelp"></a><a name="oncontexthelp"></a>CMFCToolBarMenuButton::OnContextHelp

```
virtual BOOL OnContextHelp(CWnd* pWnd);
```

### <a name="parameters"></a>Parámetros

[en] *pWnd*<br/>

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttonondraw"></a><a name="ondraw"></a>CMFCToolBarMenuButton::OnDraw

```
virtual void OnDraw(
    CDC* pDC,
    const CRect& rect,
    CMFCToolBarImages* pImages,
    BOOL bHorz = TRUE,
    BOOL bCustomizeMode = FALSE,
    BOOL bHighlight = FALSE,
    BOOL bDrawBorder = TRUE,
    BOOL bGrayDisabledButtons = TRUE);
```

### <a name="parameters"></a>Parámetros

[en] *pDC*<br/>
[en] *rect*<br/>
[en] *pImages*<br/>
[en] *bHorz*<br/>
[en] *bCustomizeMode*<br/>
[en] *bResaltar*<br/>
[en] *bDrawBorder*<br/>
[en] *bGrayDisabledButtons*<br/>

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttonondrawoncustomizelist"></a><a name="ondrawoncustomizelist"></a>CMFCToolBarMenuButton::OnDrawOnCustomizeList

```
virtual int OnDrawOnCustomizeList(
    CDC* pDC,
    const CRect& rect,
    BOOL bSelected);
```

### <a name="parameters"></a>Parámetros

[en] *pDC*<br/>
[en] *rect*<br/>
[en] *bSeleccionado*<br/>

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttonopenpopupmenu"></a><a name="openpopupmenu"></a>CMFCToolBarMenuButton::OpenPopupMenu

Llamado por el marco de trabajo cuando el usuario abre el menú desplegable de un botón de menú de la barra de herramientas.

```
virtual BOOL OpenPopupMenu(CWnd* pWnd=NULL);
```

### <a name="parameters"></a>Parámetros

*pWnd*<br/>
[en] Especifica la ventana que recibe los comandos del menú desplegable. Puede ser NULL solo si el botón de menú de la barra de herramientas tiene una ventana primaria.

### <a name="return-value"></a>Valor devuelto

TRUECuando se creó un objeto [CMFCPopupMenu (Clase)](../../mfc/reference/cmfcpopupmenu-class.md) y se abrió correctamente; de lo contrario FALSO.

### <a name="remarks"></a>Observaciones

El marco de trabajo llama a esta función cuando el usuario abre un menú desplegable desde un botón de menú de la barra de herramientas.

## <a name="cmfctoolbarmenubuttonresetimagetodefault"></a><a name="resetimagetodefault"></a>CMFCToolBarMenuButton::ResetImageToDefault

```
virtual void ResetImageToDefault();
```

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttonsavebarstate"></a><a name="savebarstate"></a>CMFCToolBarMenuButton::SaveBarState

```
virtual void SaveBarState();
```

### <a name="remarks"></a>Observaciones

El marco de trabajo llama a este método cuando crea un botón de barra de herramientas como resultado de una operación de arrastrar y colocar. Este método llama a la [CMFCPopupMenu::SaveState](../../mfc/reference/cmfcpopupmenu-class.md#savestate) método del menú emergente de nivel superior, lo que hace que el botón primario del menú emergente para volver a crear su menú.

## <a name="cmfctoolbarmenubuttonserialize"></a><a name="serialize"></a>CMFCToolBarMenuButton::Serialize

```
virtual void Serialize(CArchive& ar);
```

### <a name="parameters"></a>Parámetros

[en] *ar*<br/>

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttonsetaccdata"></a><a name="setaccdata"></a>CMFCToolBarMenuButton::SetACCData

Establece los datos de accesibilidad para el elemento de la cinta de opciones.

```
virtual BOOL SetACCData(
    CWnd* pParent,
    CAccessibilityData& data);
```

### <a name="parameters"></a>Parámetros

*pParent*<br/>
La ventana principal para el elemento de la cinta de opciones.

*datos*<br/>
Los datos de accesibilidad para el elemento de la cinta de opciones.

### <a name="return-value"></a>Valor devuelto

Siempre devuelve TRUE.

### <a name="remarks"></a>Observaciones

De forma predeterminada, este método establece los datos de accesibilidad para el elemento de la cinta de opciones y siempre devuelve TRUE. Invalide este método para establecer los datos de accesibilidad y devolver un valor que indique éxito o error.

## <a name="cmfctoolbarmenubuttonsetmenuonly"></a><a name="setmenuonly"></a>CMFCToolBarMenuButton::SetMenuOnly

Especifica si el botón se dibuja como un botón de menú o un botón de división cuando tiene un identificador de comando válido y un submenú.

```
void SetMenuOnly(BOOL bMenuOnly);
```

### <a name="parameters"></a>Parámetros

*bMenuOnly*<br/>
[en] TRUE para mostrar este botón como un botón de menú cuando tiene un identificador de comando válido y un submenú, FALSE para mostrar este botón como un botón de división cuando tiene un identificador de comando válido y un submenú.

### <a name="remarks"></a>Observaciones

Normalmente, cuando un botón de menú de la barra de herramientas tiene un submenú y un identificador de comando, el menú parece ser un botón de división que tiene un botón principal y un botón de flecha hacia abajo adjunto. Si se llama a este método y *bMenuOnly* es TRUE, el botón en su lugar parece ser un único botón de menú con una flecha hacia abajo en el botón. Cuando el usuario hace clic en la flecha en cualquiera de los modos, se abre el submenú y cuando el usuario hace clic en la parte que no es de flecha del botón en cualquiera de los modos, el marco de trabajo ejecuta el comando .

## <a name="cmfctoolbarmenubuttonsetmenupalettemode"></a><a name="setmenupalettemode"></a>CMFCToolBarMenuButton::SetMenuPaletteMode

Especifica si el menú desplegable está en modo de paleta.

```
void SetMenuPaletteMode(
    BOOL bMenuPaletteMode=TRUE,
    int nPaletteRows=1);
```

### <a name="parameters"></a>Parámetros

*bMenuPaletteMode*<br/>
[en] Especifica si el menú desplegable está en modo de paleta.

*nPaletteRows*<br/>
[en] Número de filas en la paleta.

### <a name="remarks"></a>Observaciones

En el modo de paleta, todos los elementos de menú se muestran como una paleta de varias columnas. Especifique el número de filas mediante *nPaletteRows*.

## <a name="cmfctoolbarmenubuttonsetmessagewnd"></a><a name="setmessagewnd"></a>CMFCToolBarMenuButton::SetMessageWnd

```
void SetMessageWnd(CWnd* pWndMessage);
```

### <a name="parameters"></a>Parámetros

[en] *pWndMessage*<br/>

### <a name="remarks"></a>Observaciones

## <a name="cmfctoolbarmenubuttonsetradio"></a><a name="setradio"></a>CMFCToolBarMenuButton::SetRadio

Establece el botón de menú de la barra de herramientas para mostrar un icono de estilo de botón de opción cuando está activado.

```
virtual void SetRadio();
```

### <a name="remarks"></a>Observaciones

Cuando se dibuja el botón de menú mientras está activado, llama a [CMFCVisualManager::OnDrawMenuCheck](../../mfc/reference/cmfcvisualmanager-class.md#ondrawmenucheck) para dibujar un icono de marca de verificación. De forma `OnDrawMenuCheck` predeterminada, solicita que el administrador visual actual dibuje una marca de verificación de estilo de casilla de verificación en el botón de menú. Después de llamar a este método, el administrador visual actual dibuja en su lugar una marca de verificación de estilo de botón de opción en el botón de menú. Este cambio no se puede deshacer.

Cuando se llama a este método y el botón de menú se muestra actualmente, se actualizará.

## <a name="cmfctoolbarmenubuttonsettearoff"></a><a name="settearoff"></a>CMFCToolBarMenuButton::SetTearOff

Especifica el identificador de la barra de desmontaje para el menú desplegable.

```
virtual void SetTearOff(UINT uiBarID);
```

### <a name="parameters"></a>Parámetros

*uiBarID*<br/>
[en] Especifica un nuevo identificador de barra de desmontaje.

### <a name="remarks"></a>Observaciones

Llame a este método para especificar el identificador de la barra de desmontaje que se crea cuando el usuario arrastra el botón de menú fuera de una barra de menús. Si el parámetro *uiBarID* es 0, el usuario no puede arrancar el botón de menú.

Llame a [CWinAppEx::EnableTearOffMenus](../../mfc/reference/cwinappex-class.md#enabletearoffmenus) para habilitar la característica de menú de desmontaje en la aplicación.

## <a name="see-also"></a>Consulte también

[Gráfico de jerarquías](../../mfc/hierarchy-chart.md)<br/>
[Clases](../../mfc/reference/mfc-classes.md)<br/>
[CMFCToolBarButton (clase)](../../mfc/reference/cmfctoolbarbutton-class.md)<br/>
[CMFCToolBar (Clase)](../../mfc/reference/cmfctoolbar-class.md)<br/>
[CMFCPopupMenu (clase)](../../mfc/reference/cmfcpopupmenu-class.md)
